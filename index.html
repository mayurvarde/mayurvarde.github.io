<!DOCTYPE html>
<html>
	<div class="bg">
	<head>
		<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
		<!-- before css load theme -->
		<script>
	    const saved = localStorage.getItem('theme');
	    if (saved) document.documentElement.setAttribute('data-theme', saved);
	    else if (window.matchMedia('(prefers-color-scheme: dark)').matches)
	      document.documentElement.setAttribute('data-theme', 'dark');
	    </script>
		<!-- include compass css translation -->
		<link href="stylesheets/style.css" rel="stylesheet" >
		<!-- Font Awesome for icons -->
	    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
		<!-- fonts -->
		<link href="https://fonts.googleapis.com/css?family=Google+Sans" rel="stylesheet">
		<!-- import icons -->
		<script src="https://unpkg.com/ionicons@5.0.1/dist/ionicons.js"></script>
		<!-- Import favicons -->
		<link rel="shortcut icon" type="image/png" href="resources/favicon.png"/>
		<title>Mayur's home</title>
	</head>

	<body>
		<!-- Background Music -->
		<audio id="bg-music" loop autoplay>
		  <source src="resources/music.mp3" type="audio/mpeg">
		  Your browser does not support the audio element.
		</audio>

		<div id="music-controls">
		  <button id="music-toggle"><i class="fas fa-play"></i></button>
		  <button id="music-mute"><i class="fas fa-volume-high"></i></button>
		</div>

		<button id="theme-toggle"><i class="fas fa-moon"></i></button>
		<div class="outer">
			<div class="inner">
					<section class = "gap loadanimation">
						<div class="avatar-container">
						<img src="resources/avatar.png" class="avatar">
						</div>
						<h1 class="padDown">Mayur Varde</h1>
						<p>I am a <span id="spin"></span></p>
						<h2></h2>
						<h3>
							<br>
							Gujarat, India
						</h3>
					</section>

					<ul class="gap social">
                        <li class="icon-resume tile"><a href= "resources/resume.pdf"><ion-icon name="document"></ion-icon><br><br>Resume</a></li>
						<li class="icon-instagram tile"><a href= "https://instagram.com/may.u.r"><ion-icon name="logo-instagram"></ion-icon><br><br>Instagram</a></li>
						<li class="icon-twitter tile"><a href="https://twitter.com/myurvrde"><ion-icon name="logo-twitter"></ion-icon><br><br>Twitter</a></li>
						<li class="icon-github tile"><a href="https://github.com/marshmello61"><ion-icon name="logo-github"></ion-icon><br><br>GitHub</a></li>
						<li class="icon-telegram tile"><a href="https://t.me/marshmello_61"><ion-icon name="paper-plane"></ion-icon><br><br>Telegram</a></li>
						<li class="icon-email tile"><a href="mailto: ultramayur123@gmail.com"><ion-icon name="mail"></ion-icon><br><br>Email</a></li>
						<li class="icon-paypal tile"><a href="https://paypal.me/marshmello61"><ion-icon name="wallet"></ion-icon><br><br>Paypal</a></li>
					</ul>
				</div>
			</div>

			<!-- Footer -->
			<footer id="footer">
				<ul class="copyright">
					<li> Made with <i class="fas fa-heart"></i> by Mayur</li>
					<li>&copy; <span id="year"></span> Mayur Varde</li>
				</ul>
			</footer>
		</div>

  <script>
  // Fetch current year
  document.getElementById("year").textContent =
  new Date().getFullYear();

  const toggleBtn = document.getElementById('theme-toggle');
  const root = document.documentElement;

  const savedTheme = localStorage.getItem('theme');
  const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

  function setTheme(theme) {
    root.setAttribute('data-theme', theme);
    // Use Font Awesome icons
	  toggleBtn.innerHTML =
	    theme === 'dark'
	      ? '<i class="fa-solid fa-circle-half-stroke"></i>'   // dark active
	      : '<i class="fa-solid fa-circle"></i>'; // light active
   }

  // Initial theme
  if (savedTheme) {
    setTheme(savedTheme);
  } else if (systemPrefersDark) {
    setTheme('dark');
  } else {
    setTheme('light');
  }

  // Toggle on click
  toggleBtn.addEventListener('click', () => {
    const current =
      root.getAttribute('data-theme');
	  const next = current === 'dark' ? 'light' : 'dark';
	  setTheme(next)
    localStorage.setItem('theme', next);
  });

  // Scroll animations
    const faders = document.querySelectorAll('.fade-in');
    const appearOptions = {threshold: 0.1, rootMargin: "0px 0px -50px 0px"};
    const appearOnScroll = new IntersectionObserver(function(entries, observer){
      entries.forEach(entry=>{
        if(!entry.isIntersecting) return;
        entry.target.classList.add('appear');
        observer.unobserve(entry.target);
      });
    }, appearOptions);

    faders.forEach(fader => {appearOnScroll.observe(fader);});

    // Animate skill bars
    const skillBars = document.querySelectorAll('.progress-bar div');
    window.addEventListener('scroll', ()=>{
      skillBars.forEach(bar=>{
        const barTop = bar.getBoundingClientRect().top;
        const windowHeight = window.innerHeight;
        if(barTop < windowHeight-50){
          bar.style.width = bar.getAttribute('data-width');
        }
      });
    });

const music = document.getElementById('bg-music');
const musicBtn = document.getElementById('music-toggle');
const muteBtn = document.getElementById('music-mute');

/* ===== INITIAL ICON STATE ===== */

// Mute / Unmute icon
muteBtn.innerHTML = music.muted
  ? '<i class="fa-solid fa-volume-mute"></i>' // muted
  : '<i class="fa-solid fa-volume-up"></i>';  // unmuted

// Play / Pause icon
musicBtn.innerHTML = music.paused
  ? '<i class="fa-solid fa-play-circle"></i>'  // paused
  : '<i class="fa-solid fa-pause-circle"></i>'; // playing

/* ===== AUTOPLAY ===== */
window.addEventListener('load', () => {
  music.play().catch(() => {
    musicBtn.innerHTML = '<i class="fa-solid fa-play-circle"></i>';
  });
});

/* ===== PLAY / PAUSE ===== */
musicBtn.addEventListener('click', () => {
  if (music.paused) {
    music.play();
    musicBtn.innerHTML = '<i class="fa-solid fa-pause-circle"></i>';
  } else {
    music.pause();
    musicBtn.innerHTML = '<i class="fa-solid fa-play-circle"></i>';
  }
});

/* ===== MUTE / UNMUTE ===== */
muteBtn.addEventListener('click', () => {
  music.muted = !music.muted;

  muteBtn.innerHTML = music.muted
    ? '<i class="fa-solid fa-volume-mute"></i>'
    : '<i class="fa-solid fa-volume-up"></i>';

  musicBtn.style.opacity = music.muted ? "0.4" : "1";
});
  </script>
	</body>
</html>
